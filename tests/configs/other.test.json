{
  "Other tests": [
    {
      "id": "0007",
      "name": "Exit code",
      "files": {
        "launcher-config": {
          "scripts": {
            "build-stuff": [
              "echo Command 1",
              "exit 1 || true",
              "echo Command 2",
              "exit 1",
              "echo Command 3"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "build-stuff",
          "result": [
            "Command 1",
            "Command 2"
          ]
        }
      ]
    },
    {
      "id": "0008",
      "name": "Log output",
      "files": {
        "launcher-config": {
          "scripts": {
            "build-stuff": [
              "echo Command 1",
              "exit 1 || true",
              "echo Command 2",
              "exit 1",
              "echo Command 3"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "build-stuff",
          "cmd-args": "--logLevel=1",
          "result": [
            "Loaded config:  tests/temp/$id/launcher-config.json",
            "",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Launch arguments  : [ '--directory=./tests/temp/$id', '--logLevel=1' ]",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "",
            "Command 1",
            "Command 2",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ],
          "result:win32": [
            "Loaded config:  tests\\temp\\$id\\launcher-config.json",
            "",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Launch arguments  : [ '--directory=.\\\\tests\\\\temp\\\\$id', '--logLevel=1' ]",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "",
            "Command 1",
            "Command 2",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ]
        },
        {
          "lifecycle": "start",
          "npm-args": "build-stuff",
          "cmd-args": "--logLevel=2",
          "result": [
            "Loaded config:  tests/temp/$id/launcher-config.json",
            "",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Launch arguments  : [ '--directory=./tests/temp/$id', '--logLevel=2' ]",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "",
            "",
            "\u001b[1mLauncher Settings Values\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mLauncher Settings Arrays\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[2mCommand 1\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mtrue\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process exited  : pid=11111  code=1  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 2'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[2mCommand 2\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process exited  : pid=11111  code=1  signal=null   elapsed=4ms",
            "",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ],
          "result:win32": [
            "Loaded config:  tests\\temp\\$id\\launcher-config.json",
            "",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Launch arguments  : [ '--directory=.\\\\tests\\\\temp\\\\$id', '--logLevel=2' ]",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "",
            "",
            "\u001b[1mLauncher Settings Values\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mLauncher Settings Arrays\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[90mCommand 1\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mtrue\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process error   : pid=11111  code=Error: spawn exit 1 ENOENT   elapsed=5ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 2'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[90mCommand 2\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process error   : pid=11111  code=Error: spawn exit 1 ENOENT   elapsed=5ms",
            "",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ]
        },
        {
          "lifecycle": "start",
          "npm-args": "build-stuff",
          "cmd-args": "--logLevel=3",
          "result": [
            "Loaded config:  tests/temp/$id/launcher-config.json",
            "",
            "Config:  {\n  \u001b[0m\"scripts\":\u001b[0m {\n    \u001b[0m\"scripts\":\u001b[0m {\n      \u001b[0m\"build-stuff\":\u001b[0m [\n        \u001b[32m\"echo Command 1\"\u001b[0m,\n        \u001b[32m\"exit 1 || true\"\u001b[0m,\n        \u001b[32m\"echo Command 2\"\u001b[0m,\n        \u001b[32m\"exit 1\"\u001b[0m,\n        \u001b[32m\"echo Command 3\"\u001b[0m\n      ]\n    }\n  },\n  \u001b[0m\"menu\":\u001b[0m {\n    \u001b[0m\"description\":\u001b[0m \u001b[32m\"\"\u001b[0m\n  },\n  \u001b[0m\"options\":\u001b[0m {\n    \u001b[0m\"logLevel\":\u001b[0m \u001b[33m0\u001b[0m,\n    \u001b[0m\"files\":\u001b[0m [\n      \u001b[32m\"launcher-config.json\"\u001b[0m,\n      \u001b[32m\"launcher-scripts.json\"\u001b[0m,\n      \u001b[32m\"launcher-settings.json\"\u001b[0m,\n      \u001b[32m\"launcher-menu.json\"\u001b[0m,\n      \u001b[32m\"launcher-custom.json\"\u001b[0m\n    ],\n    \u001b[0m\"script\":\u001b[0m {\n      \u001b[0m\"shell\":\u001b[0m \u001b[33mtrue\u001b[0m\n    },\n    \u001b[0m\"glob\":\u001b[0m {},\n    \u001b[0m\"menu\":\u001b[0m {\n      \u001b[0m\"defaultChoice\":\u001b[0m \u001b[32m\"\"\u001b[0m,\n      \u001b[0m\"defaultScript\":\u001b[0m \u001b[32m\"\"\u001b[0m,\n      \u001b[0m\"timeout\":\u001b[0m \u001b[33m0\u001b[0m,\n      \u001b[0m\"pageSize\":\u001b[0m \u001b[33m7\u001b[0m\n    }\n  },\n  \u001b[0m\"settings\":\u001b[0m {}\n}",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Process platform  : linux",
            "Script shell      : true",
            "Launch arguments  : {\n  arguments: {\n    logLevel: 3,\n    init: false,\n    migrate: false,\n    confirm: undefined,\n    help: false,\n    version: false,\n    config: null,\n    script: null,\n    ansi: true,\n    directory: 'tests/temp/$id',\n    menuTimeout: 0\n  },\n  optionals: []\n}",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "Script object   : [\n  \u001b[32m\"echo Command 1\"\u001b[0m,\n  \u001b[32m\"exit 1 || true\"\u001b[0m,\n  \u001b[32m\"echo Command 2\"\u001b[0m,\n  \u001b[32m\"exit 1\"\u001b[0m,\n  \u001b[32m\"echo Command 3\"\u001b[0m\n]",
            "Script expanded : {\n  \u001b[0m\"parameters\":\u001b[0m {},\n  \u001b[0m\"sequential\":\u001b[0m [\n    \u001b[32m\"echo Command 1\"\u001b[0m,\n    \u001b[32m\"exit 1 || true\"\u001b[0m,\n    \u001b[32m\"echo Command 2\"\u001b[0m,\n    \u001b[32m\"exit 1\"\u001b[0m,\n    \u001b[32m\"echo Command 3\"\u001b[0m\n  ]\n}",
            "",
            "",
            "\u001b[1mLauncher Settings Values\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mLauncher Settings Arrays\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[2mCommand 1\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mtrue\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process exited  : pid=11111  code=1  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 2'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[2mCommand 2\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process exited  : pid=11111  code=1  signal=null   elapsed=4ms",
            "",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ],
          "result:win32": [
            "Loaded config:  tests\\temp\\$id\\launcher-config.json",
            "",
            "Config:  {\n  \u001b[0m\"scripts\":\u001b[0m {\n    \u001b[0m\"scripts\":\u001b[0m {\n      \u001b[0m\"build-stuff\":\u001b[0m [\n        \u001b[32m\"echo Command 1\"\u001b[0m,\n        \u001b[32m\"exit 1 || true\"\u001b[0m,\n        \u001b[32m\"echo Command 2\"\u001b[0m,\n        \u001b[32m\"exit 1\"\u001b[0m,\n        \u001b[32m\"echo Command 3\"\u001b[0m\n      ]\n    }\n  },\n  \u001b[0m\"menu\":\u001b[0m {\n    \u001b[0m\"description\":\u001b[0m \u001b[32m\"\"\u001b[0m\n  },\n  \u001b[0m\"options\":\u001b[0m {\n    \u001b[0m\"logLevel\":\u001b[0m \u001b[33m0\u001b[0m,\n    \u001b[0m\"files\":\u001b[0m [\n      \u001b[32m\"launcher-config.json\"\u001b[0m,\n      \u001b[32m\"launcher-scripts.json\"\u001b[0m,\n      \u001b[32m\"launcher-settings.json\"\u001b[0m,\n      \u001b[32m\"launcher-menu.json\"\u001b[0m,\n      \u001b[32m\"launcher-custom.json\"\u001b[0m\n    ],\n    \u001b[0m\"script\":\u001b[0m {\n      \u001b[0m\"shell\":\u001b[0m \u001b[33mtrue\u001b[0m\n    },\n    \u001b[0m\"glob\":\u001b[0m {},\n    \u001b[0m\"menu\":\u001b[0m {\n      \u001b[0m\"defaultChoice\":\u001b[0m \u001b[32m\"\"\u001b[0m,\n      \u001b[0m\"defaultScript\":\u001b[0m \u001b[32m\"\"\u001b[0m,\n      \u001b[0m\"timeout\":\u001b[0m \u001b[33m0\u001b[0m,\n      \u001b[0m\"pageSize\":\u001b[0m \u001b[33m7\u001b[0m\n    }\n  },\n  \u001b[0m\"settings\":\u001b[0m {}\n}",
            "\u001b[1mDate              : 2019-09-16 10:33:20.628\u001b[0m",
            "Version           : $version",
            "Lifecycle event   : start",
            "Launch script     : build-stuff",
            "Process platform  : win32",
            "Script shell      : true",
            "Launch arguments  : { arguments:\n   { logLevel: 3,\n     init: false,\n     migrate: false,\n     confirm: undefined,\n     help: false,\n     version: false,\n     config: null,\n     script: null,\n     ansi: true,\n     directory: 'tests\\\\temp\\\\$id',\n     menuTimeout: 0 },\n  optionals: [] }",
            "",
            "Script id       : build-stuff",
            "Script params   : {}",
            "Script args     : [ 'build-stuff' ]",
            "Script object   : [\n  \u001b[32m\"echo Command 1\"\u001b[0m,\n  \u001b[32m\"exit 1 || true\"\u001b[0m,\n  \u001b[32m\"echo Command 2\"\u001b[0m,\n  \u001b[32m\"exit 1\"\u001b[0m,\n  \u001b[32m\"echo Command 3\"\u001b[0m\n]",
            "Script expanded : {\n  \u001b[0m\"parameters\":\u001b[0m {},\n  \u001b[0m\"sequential\":\u001b[0m [\n    \u001b[32m\"echo Command 1\"\u001b[0m,\n    \u001b[32m\"exit 1 || true\"\u001b[0m,\n    \u001b[32m\"echo Command 2\"\u001b[0m,\n    \u001b[32m\"exit 1\"\u001b[0m,\n    \u001b[32m\"echo Command 3\"\u001b[0m\n  ]\n}",
            "",
            "",
            "\u001b[1mLauncher Settings Values\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mLauncher Settings Arrays\u001b[0m",
            "",
            "",
            "Total: 0",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[90mCommand 1\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mtrue\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process error   : pid=11111  code=Error: spawn exit 1 ENOENT   elapsed=5ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'echo Command 2'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "",
            "\u001b[90mCommand 2\u001b[0m",
            "",
            "Process exited  : pid=11111  code=0  signal=null   elapsed=4ms",
            "",
            "",
            "\u001b[1mSpawn action   \u001b[0m : \u001b[32m'exit 1'\u001b[0m []",
            "Spawn options   : { order=\u001b[36msequential\u001b[0m, supress=\u001b[33mfalse\u001b[0m }",
            "Process pid     : \u001b[33m11111\u001b[0m",
            "Process error   : pid=11111  code=Error: spawn exit 1 ENOENT   elapsed=5ms",
            "",
            "",
            "ExitCode: 1",
            "Elapsed: 237ms"
          ]
        }
      ]
    },
    {
      "id": "0009",
      "name": "Variable assignments",
      "files": {
        "launcher-config": {
          "scripts": {
            "assignments:$value1=A": [
              "value1=B",
              "value2=B",
              "echo value1: $value1",
              "echo value2: $value2",
              "--",
              [
                "value1=C",
                "value2=$value1-$value2-C",
                "echo value1: $value1",
                "echo value2: $value2"
              ],
              "--",
              "echo value1: $value1",
              "echo value2: $value2"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "assignments",
          "result": [
            "value1: A",
            "value2: B",
            "--------------------------------",
            "value1: A",
            "value2: A-B-C",
            "--------------------------------",
            "value1: A",
            "value2: B"
          ]
        },
        {
          "lifecycle": "start",
          "npm-args": "assignments:B",
          "result": [
            "value1: B",
            "value2: B",
            "--------------------------------",
            "value1: B",
            "value2: B-B-C",
            "--------------------------------",
            "value1: B",
            "value2: B"
          ]
        }
      ]
    },
    {
      "id": "0010",
      "name": "Variable assignments",
      "files": {
        "launcher-config": {
          "scripts": {
            "assignments:$value1=": [
              "echo value1: $value1"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "assignments",
          "result": [
            "value1:"
          ]
        },
        {
          "lifecycle": "start",
          "npm-args": "assignments:B",
          "result": [
            "value1: B"
          ]
        }
      ]
    },
    {
      "id": "0011",
      "name": "Variable assignments",
      "files": {
        "launcher-config": {
          "scripts": {
            "assignments:$value1": [
              "echo value1: $value1"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "assignments",
          "result": [
            "Error: Missing launch script: assignments"
          ]
        },
        {
          "lifecycle": "start",
          "npm-args": "assignments:B",
          "result": [
            "value1: B"
          ]
        }
      ]
    },
    {
      "id": "0012",
      "name": "Circular reference",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": [
              "echo Circular"
            ],
            "build-stuff": [
              "echo"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": "build-stuff",
          "result": [
            "Circular"
          ]
        }
      ]
    },
    {
      "id": "0013",
      "name": "Auto arguments",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": "echo"
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": [
            "echo",
            "arg1",
            "arg2",
            "arg3"
          ],
          "result": [
            "arg1 arg2 arg3"
          ]
        }
      ]
    },
    {
      "id": "0014",
      "name": "Auto arguments",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": [
              "echo"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": [
            "echo",
            "arg1",
            "arg2",
            "arg3"
          ],
          "result": [
            "arg1 arg2 arg3"
          ]
        }
      ]
    },
    {
      "id": "0015",
      "name": "Auto arguments",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": [
              "echo "
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": [
            "echo",
            "arg1",
            "arg2",
            "arg3"
          ],
          "result": [],
          "result:win32": [
            "ECHO is on."
          ]
        }
      ]
    },
    {
      "id": "0016",
      "name": "Auto arguments",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": [
              "echo",
              "echo"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": [
            "echo",
            "arg1",
            "arg2",
            "arg3"
          ],
          "result": []
        }
      ]
    },
    {
      "id": "0017",
      "name": "Auto arguments",
      "files": {
        "launcher-config": {
          "scripts": {
            "echo": [
              "echo $2*"
            ]
          }
        }
      },
      "tests": [
        {
          "lifecycle": "start",
          "npm-args": [
            "echo",
            "arg1",
            "arg2",
            "arg3"
          ],
          "result": [
            "arg2 arg3"
          ]
        }
      ]
    }
  ]
}